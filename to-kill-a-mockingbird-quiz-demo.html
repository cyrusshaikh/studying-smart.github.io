<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>To Kill a Mockingbird - Quiz Engine V6 Pro | Studying Smart</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    details summary::-webkit-details-marker {
      display: none;
    }
  </style>
</head>

<body class="bg-white text-[#1D3557] min-h-screen flex flex-col">
  <nav class="bg-[#1D3557] text-white px-6 py-4 flex justify-between items-center shadow sticky top-0 z-50">
    <div class="text-2xl font-bold">Studying Smart</div>
    <div class="flex items-center space-x-6">
      <a href="#" class="hover:text-[#0077B6] transition duration-200">Home</a>
      <a href="#" class="hover:text-[#0077B6] transition duration-200">Subjects</a>
      <a href="book-guides.html" class="hover:text-[#0077B6] transition duration-200">Book Guides</a>
      <a href="#" class="hover:text-[#0077B6] transition duration-200">Textbook Solutions</a>
      <a href="#" class="hover:text-[#0077B6] transition duration-200">About</a>
    </div>
  </nav>

  <div class="flex flex-1">
    <aside class="w-64 bg-[#F7F9FC] p-6 shadow-lg sticky top-16 h-[calc(100vh-4rem)] overflow-y-auto">
      <h2 class="text-xl font-semibold mb-4">Contents</h2>
      <ul class="space-y-3">
        <li><a href="to-kill-a-mockingbird-introduction.html" class="hover:text-[#0077B6] transition duration-200">Introduction</a></li>
        <li><a href="to-kill-a-mockingbird-background.html" class="hover:text-[#0077B6] transition duration-200">Background</a></li>
        <li><a href="to-kill-a-mockingbird-chapters-1-4.html" class="hover:text-[#0077B6] transition duration-200">Chapters 1-4</a></li>
        <li><a href="to-kill-a-mockingbird-quotes.html" class="hover:text-[#0077B6] transition duration-200">Quotes</a></li>
        <li><a href="to-kill-a-mockingbird-essays.html" class="hover:text-[#0077B6] transition duration-200">Essays</a></li>
        <li><a href="#" class="hover:text-[#0077B6] transition duration-200 font-semibold">Quiz Engine V6 Pro</a></li>
      </ul>
    </aside>

    <main class="flex-1 p-10 bg-white">
      <div class="max-w-5xl mx-auto px-6 py-8">
        <h1 class="text-3xl font-bold mb-4">Quiz Engine V6 (Pro Edition)</h1>
        <div id="progress" class="text-lg font-semibold mb-4"></div>
        <div id="quiz" class="space-y-10"></div>
        <div class="mt-10 text-center">
          <button onclick="initializeQuiz()" class="px-8 py-3 border-2 border-[#1D3557] text-[#1D3557] font-semibold rounded-lg hover:bg-[#0077B6] hover:text-white transition">Take Again</button>
        </div>
      </div>
    </main>
  </div>

  <footer class="bg-[#1D3557] text-white text-center py-6">
    <div class="space-x-4 mb-2">
      <a href="#" class="hover:underline text-sm">Terms</a>
      <a href="#" class="hover:underline text-sm">Privacy</a>
      <a href="#" class="hover:underline text-sm">Contact</a>
    </div>
    <p class="text-sm">&copy; 2025 Studying Smart. All rights reserved.</p>
  </footer>

  <script>
    const originalQuestions = [
      {
        type: "multiple-choice",
        question: "Who narrates To Kill a Mockingbird?",
        options: ["Atticus Finch", "Scout Finch", "Jem Finch", "Harper Lee"],
        correctIndex: 1,
        explanations: [
          "Incorrect. Atticus is Scout's father.",
          "Correct. Scout narrates the novel.",
          "Incorrect. Jem is Scout's brother.",
          "Incorrect. Harper Lee is the author."
        ],
        hint: "Think of the child telling the story."
      },
      {
        type: "true-false",
        question: "Tom Robinson was found not guilty.",
        correctAnswer: false,
        explanation: "Tom Robinson was sadly convicted despite being innocent.",
        hint: "Remember the outcome of the trial."
      },
      {
        type: "short-answer",
        question: "Who is Scout's brother?",
        acceptableAnswers: ["jem", "jeremy", "jem finch", "jeremy finch"],
        explanation: "Scout's brother is Jem Finch.",
        hint: "His name starts with 'J'."
      },
      {
        type: "long-answer",
        question: "Explain why Atticus defends Tom Robinson.",
        modelAnswer: "Atticus believes in justice and equality. He knows Tom is innocent and feels morally obligated to defend him even against public opinion.",
        hint: "It relates to Atticus's sense of morality."
      },
      {
        type: "matching",
        question: "Match the characters to their descriptions:",
        pairs: [
          { left: "Scout", right: "Narrator of the novel" },
          { left: "Boo Radley", right: "Reclusive neighbor" },
          { left: "Atticus", right: "Scout's father and lawyer" }
        ],
        hint: "Think about each character's role."
      }
    ];

    let questions = [];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function initializeQuiz() {
      questions = JSON.parse(JSON.stringify(originalQuestions));
      questions = shuffle(questions);
      questions.forEach(q => {
        if (q.type === "multiple-choice") {
          const optionsWithIndexes = q.options.map((opt, idx) => ({ opt, idx }));
          shuffle(optionsWithIndexes);
          q.options = optionsWithIndexes.map(o => o.opt);
          const newCorrectIndex = optionsWithIndexes.findIndex(o => o.idx === q.correctIndex);
          q.correctIndex = newCorrectIndex;
        }
      });
      renderQuiz();
    }

    function renderQuiz() {
      const quizContainer = document.getElementById("quiz");
      quizContainer.innerHTML = "";
      questions.forEach((q, i) => {
        const div = document.createElement("div");
        div.classList.add("p-6", "border", "rounded", "shadow");
        div.innerHTML = `<div class='flex justify-between items-center mb-2'><p class='font-semibold text-xl'>${i + 1}. ${q.question}</p><button id='hint-btn-${i}' onclick='toggleHint(${i})' class='px-3 py-1 border border-[#1D3557] rounded text-sm hover:bg-[#0077B6] hover:text-white transition'>Show Hint</button></div>`;
        div.innerHTML += `<div id='hint-${i}' class='text-blue-600 mb-2 hidden'>Hint: ${q.hint}</div>`;
        if (q.type === "multiple-choice") {
          div.innerHTML += q.options.map((opt, j) => `<button id=\"q${i}a${j}\" onclick=\"selectMultipleChoice(${i}, ${j})\" class=\"block w-full text-left border px-4 py-2 rounded mb-2 transition hover:bg-[#F1FAFF]\">${opt}</button>`).join('') + `<div id=\"explanation-${i}\" class=\"mt-4 text-lg\"></div>`;
        }
        if (q.type === "true-false") {
          div.innerHTML += `<button onclick=\"selectTrueFalse(${i}, true, this)\" class=\"block w-full text-left border px-4 py-2 rounded mb-2 transition hover:bg-[#F1FAFF]\">True</button><button onclick=\"selectTrueFalse(${i}, false, this)\" class=\"block w-full text-left border px-4 py-2 rounded mb-2 transition hover:bg-[#F1FAFF]\">False</button><div id=\"explanation-${i}\" class=\"mt-4 text-lg\"></div>`;
        }
        if (q.type === "short-answer") {
          div.innerHTML += `<input id=\"input-${i}\" type=\"text\" class=\"border w-full px-4 py-2 rounded mb-2\"><button onclick=\"submitShortAnswer(${i})\" class=\"px-6 py-2 border-2 border-[#1D3557] text-[#1D3557] font-semibold rounded-lg hover:bg-[#0077B6] hover:text-white transition\">Submit Answer</button><div id=\"explanation-${i}\" class=\"mt-4 text-lg\"></div>`;
        }
        if (q.type === "long-answer") {
          div.innerHTML += `<textarea id=\"longinput-${i}\" class=\"border w-full px-4 py-2 rounded mb-2\" rows=\"4\"></textarea><button onclick=\"submitLongAnswer(${i})\" class=\"px-6 py-2 border-2 border-[#1D3557] text-[#1D3557] font-semibold rounded-lg hover:bg-[#0077B6] hover:text-white transition\">Submit</button><div id=\"explanation-${i}\" class=\"mt-4 text-lg\"></div>`;
        }
        if (q.type === "matching") {
          div.innerHTML += `<ul class=\"space-y-2\">`;
          q.pairs.forEach((pair, idx) => {
            div.innerHTML += `<li><strong>${pair.left}</strong>: <select id=\"match-${i}-${idx}\" class=\"border p-2 rounded\"><option value=\"\">Select...</option>${q.pairs.map(p => `<option value=\"${p.right}\">${p.right}</option>`).join('')}</select></li>`;
          });
          div.innerHTML += `</ul><button onclick=\"submitMatching(${i})\" class=\"mt-4 px-6 py-2 border-2 border-[#1D3557] text-[#1D3557] font-semibold rounded-lg hover:bg-[#0077B6] hover:text-white transition\">Check Answers</button><div id=\"explanation-${i}\" class=\"mt-4 text-lg\"></div>`;
        }
        quizContainer.appendChild(div);
      });
      updateProgress();
    }

    function toggleHint(index) {
      const hint = document.getElementById(`hint-${index}`);
      const btn = document.getElementById(`hint-btn-${index}`);
      if (hint.classList.contains("hidden")) {
        hint.classList.remove("hidden");
        btn.innerText = "Hide Hint";
      } else {
        hint.classList.add("hidden");
        btn.innerText = "Show Hint";
      }
    }

    function updateProgress() {
      document.getElementById("progress").innerText = `Total Questions: ${questions.length}`;
    }

    function selectMultipleChoice(qIndex, selectedIndex) {
      const q = questions[qIndex];
      const button = document.getElementById(`q${qIndex}a${selectedIndex}`);
      if (selectedIndex === q.correctIndex) {
        button.classList.add("bg-green-100", "border-green-500", "text-green-700");
        document.getElementById(`explanation-${qIndex}`).innerHTML = `<p class='text-green-700'>${q.explanations[selectedIndex]}</p>`;
      } else {
        button.classList.add("bg-red-100", "border-red-500", "text-red-700");
        document.getElementById(`explanation-${qIndex}`).innerHTML = `<p class='text-red-700'>${q.explanations[selectedIndex]}</p>`;
      }
    }

    function selectTrueFalse(qIndex, answer, btn) {
      const q = questions[qIndex];
      if (answer === q.correctAnswer) {
        btn.classList.add("bg-green-100", "border-green-500", "text-green-700");
        document.getElementById(`explanation-${qIndex}`).innerHTML = `<p class='text-green-700'>Correct!</p>`;
      } else {
        btn.classList.add("bg-red-100", "border-red-500", "text-red-700");
        document.getElementById(`explanation-${qIndex}`).innerHTML = `<p class='text-red-700'>Incorrect. ${q.explanation}</p>`;
      }
    }

    function normalize(input) {
      return input.trim().toLowerCase().replace(/[^a-z0-9 ]/g, "");
    }

    function submitShortAnswer(qIndex) {
      const input = normalize(document.getElementById(`input-${qIndex}`).value);
      const q = questions[qIndex];
      const correct = q.acceptableAnswers.includes(input);
      const explanationDiv = document.getElementById(`explanation-${qIndex}`);
      explanationDiv.innerHTML = "";
      setTimeout(() => {
        if (correct) {
          explanationDiv.innerHTML = `<p class='text-green-700'>Correct. ${q.explanation}</p>`;
        } else {
          explanationDiv.innerHTML = `<p class='text-red-700'>Incorrect. ${q.explanation}</p>`;
        }
      }, 100);
    }

    function submitLongAnswer(qIndex) {
      const q = questions[qIndex];
      const explanationDiv = document.getElementById(`explanation-${qIndex}`);
      explanationDiv.innerHTML = `<p class='text-green-700'>Model Answer: ${q.modelAnswer}</p>`;
    }

    function submitMatching(qIndex) {
      const q = questions[qIndex];
      let correct = 0;
      q.pairs.forEach((pair, idx) => {
        const select = document.getElementById(`match-${qIndex}-${idx}`);
        if (select.value === pair.right) {
          select.classList.remove("border-red-500", "bg-red-100");
          select.classList.add("border-green-500", "bg-green-100");
          correct++;
        } else {
          select.classList.remove("border-green-500", "bg-green-100");
          select.classList.add("border-red-500", "bg-red-100");
        }
      });
      const explanationDiv = document.getElementById(`explanation-${qIndex}`);
      if (correct === q.pairs.length) {
        explanationDiv.innerHTML = `<p class='text-green-700'>Perfect! All matches correct.</p>`;
      } else {
        explanationDiv.innerHTML = `<p class='text-red-700'>${correct} out of ${q.pairs.length} correct. Keep trying!</p>`;
      }
    }

    initializeQuiz();
  </script>
</body>

</html>
